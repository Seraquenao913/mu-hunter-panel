<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Account Mu Hunter Panel</title>

  <script>document.documentElement.classList.add('dark');</script>

  <script src="https://cdn.tailwindcss.com"></script>
  <script>tailwind.config = { darkMode: 'class' }</script>

  <!-- Supabase JS v2 -->
  <script type="module" crossorigin src="https://esm.sh/@supabase/supabase-js@2"></script>

  <style>
    .switch { position: relative; display: inline-block; width: 44px; height: 24px; }
    .switch input { opacity: 0; width: 0; height: 0; }
    .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0;
              background-color: #3f3f46; transition: .2s; border-radius: 9999px; }
    .slider:before { position: absolute; content: ""; height: 18px; width: 18px; left: 3px; bottom: 3px;
                     background-color: white; transition: .2s; border-radius: 9999px; }
    input:checked + .slider { background-color: #10b981; }
    input:focus + .slider { box-shadow: 0 0 1px #10b981; }
    input:checked + .slider:before { transform: translateX(20px); }

    th.sortable { cursor: pointer; user-select: none; }
    th.sortable .hint { opacity: .6; font-size: 12px; margin-left: 4px; }

    .saving { opacity: .55; pointer-events: none; transition: opacity .15s ease; }
    .tagbox { width: 60px; text-transform: uppercase; }

    .title-gradient {
      background: linear-gradient(90deg, #a78bfa, #60a5fa 35%, #34d399 70%, #f472b6);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }
    .glass {
      backdrop-filter: saturate(180%) blur(6px);
      background-color: rgba(24,24,27,.5);
    }

    .modal-overlay { position: fixed; inset: 0; display: none; align-items: center; justify-content: center;
                     background: rgba(0,0,0,.6); z-index: 50; }
    .modal { width: 100%; max-width: 420px; border-radius: 16px; background: #0a0a0a; border: 1px solid #27272a;
             box-shadow: 0 10px 30px rgba(0,0,0,.35); }
    .modal header { padding: 14px 16px; border-bottom: 1px solid #27272a;}
    .modal .content { padding: 16px; }
    .modal .actions { padding: 16px; display: flex; gap: 8px; justify-content: flex-end; }
    .show { display: flex; }

    /* Checkbox custom vermelho */
    .cbfx {
      appearance: none;
      -webkit-appearance: none;
      width: 26px;
      height: 26px;
      border: 1px solid rgb(255, 70, 70);
      border-radius: 3px;
      background: rgba(0,0,0,0);
      box-shadow: rgba(0,0,0,0.09) 0 5px 18px -12px;
      box-sizing: border-box;
      cursor: pointer;
      display: inline-block;
      vertical-align: middle;
      transition: color .15s ease-in-out,
                  background-color .15s ease-in-out,
                  border-color .15s ease-in-out,
                  box-shadow .15s ease-in-out,
                  transform .12s ease-in-out;
    }
    .cbfx:hover { box-shadow: rgba(255,70,70,.45) 0 0 0 2px inset; }
    .cbfx:active { transform: scale(0.95); }
    .cbfx:checked { background-color: rgb(255,70,70); border-color: rgb(255,70,70); }
    .cbfx:checked::after {
      content: "";
      position: relative;
      display: block;
      width: 12px;
      height: 6px;
      margin: 6px auto 0;
      border: 2px solid #fff;
      border-top: 0;
      border-right: 0;
      transform: rotate(-45deg);
    }
    .cbfx:focus { outline: none; box-shadow: 0 0 0 3px rgba(255,70,70,.35); }
  </style>
</head>

<body class="bg-zinc-950 text-zinc-100 min-h-screen">
  <div id="app" class="max-w-7xl mx-auto p-4">

    <header class="mb-6">
      <div class="rounded-2xl glass border border-zinc-800 p-6 text-center shadow">
        <h1 class="text-3xl md:text-4xl font-extrabold tracking-tight title-gradient">
          Account Mu Hunter Panel
        </h1>
        <p class="mt-2 text-sm text-zinc-400">gerencie status, tags e controles em tempo real</p>
        <div class="mt-4 flex items-center justify-center">
          <button id="logoutBtn" class="px-3 py-1.5 rounded-xl bg-red-500 text-white hidden hover:bg-red-600 transition">
            Sair
          </button>
        </div>
      </div>
    </header>

    <section id="authCard" class="max-w-md mx-auto mt-8 bg-zinc-900 border border-zinc-800 shadow rounded-2xl p-6">
      <h2 class="text-xl font-semibold mb-4">Entrar</h2>
      <div class="space-y-3">
        <label class="block">
          <span class="text-sm text-zinc-300">E-mail</span>
          <input id="email" type="email" class="mt-1 w-full rounded-xl border border-zinc-800 bg-zinc-950 px-3 py-2 outline-none focus:ring-2 focus:ring-zinc-700" />
        </label>
        <label class="block">
          <span class="text-sm text-zinc-300">Senha</span>
          <input id="password" type="password" class="mt-1 w-full rounded-xl border border-zinc-800 bg-zinc-950 px-3 py-2 outline-none focus:ring-2 focus:ring-zinc-700" />
        </label>
        <button id="loginBtn" class="w-full py-2 rounded-xl bg-blue-600 text-white hover:bg-blue-500 transition">Entrar</button>
        <p id="authMsg" class="text-sm text-red-400 hidden"></p>
      </div>
    </section>

    <section id="dashboard" class="hidden">
      <div class="p-4 rounded-2xl bg-zinc-900 border border-zinc-800 shadow text-center">
        <p>Login OK. Substitua este bloco pelo seu dashboard completo.</p>
      </div>
    </section>
  </div>

  <script type="module">
    import { createClient } from "https://esm.sh/@supabase/supabase-js@2";

    const SUPABASE_URL = "https://uwcyvobwgcdyyphafofy.supabase.co";
    const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV3Y3l2b2J3Z2NkeXlwaGFmb2Z5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE2MDIyMzQsImV4cCI6MjA3NzE3ODIzNH0.YTDIIZ5AzwyhDASO15vexglhvTX4ZMqoZksZh3PPEH8";

    const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
    window.supabase = supabase;

    const authCard = document.getElementById('authCard');
    const dashboard = document.getElementById('dashboard');
    const loginBtn = document.getElementById('loginBtn');
    const logoutBtn = document.getElementById('logoutBtn');
    const email = document.getElementById('email');
    const password = document.getElementById('password');
    const authMsg = document.getElementById('authMsg');

    async function updateSession(){
      const { data: { session } } = await supabase.auth.getSession();
      const logged = !!session;
      authCard.classList.toggle('hidden', logged);
      dashboard.classList.toggle('hidden', !logged);
      logoutBtn.classList.toggle('hidden', !logged);
    }

    loginBtn.addEventListener('click', async ()=>{
      authMsg.classList.add('hidden'); authMsg.textContent='';
      const e = email.value.trim(); const p = password.value;
      if(!e || !p){ authMsg.textContent='Preencha email e senha.'; authMsg.classList.remove('hidden'); return; }
      const { error } = await supabase.auth.signInWithPassword({ email: e, password: p });
      if(error){ authMsg.textContent = error.message || 'Falha ao entrar.'; authMsg.classList.remove('hidden'); return; }
      await updateSession();
    });

    logoutBtn?.addEventListener('click', async ()=>{ await supabase.auth.signOut(); await updateSession(); });
    await updateSession();
  </script>
</body>
</html>
